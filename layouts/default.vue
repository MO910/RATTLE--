<template lang="pug">
NuxtLoadingIndicator
v-app
    //- navigation-drawer
    v-app-bar
        v-app-bar-title 
            NuxtLink(to='/')
                <svg width="60" height="61" viewBox="0 0 60 61" fill="none" xmlns="http://www.w3.org/2000/svg">
                    //- <circle cx="29.9993" cy="30.5042" r="30" fill="#2F2F2F"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M38.6494 1.77001C40.6202 4.09244 42.8699 10.8728 45.0213 20.7932C45.662 23.991 47.1569 28.2549 48.4383 30.2802C50.6753 34.002 55.9939 37.8299 59.0938 37.8484C58.9014 38.613 58.6797 39.3659 58.4299 40.1059C56.2262 39.8965 53.0273 38.5925 50.7874 36.6759C45.662 32.1989 44.3807 29.4274 41.2841 16.4228C39.7891 10.3469 37.6536 4.05774 36.3722 2.45881C35.9666 1.89552 35.6659 1.40781 35.4604 1C36.5449 1.19947 37.6091 1.45726 38.6494 1.77001ZM49.1613 7.42031C48.9726 7.8956 48.7981 8.54776 48.6518 9.3875C47.7976 13.8645 49.6129 20.8998 52.2824 23.3515C53.524 24.5221 57.2163 25.7372 59.675 26.0772C59.5708 25.3729 59.4421 24.6765 59.2899 23.989C58.8396 23.7774 58.3501 23.5619 57.8349 23.3515C53.0298 21.4328 51.3214 18.3415 51.3214 11.7326C51.3214 10.7945 51.2731 9.96957 51.1887 9.26718C50.5415 8.62144 49.865 8.00509 49.1613 7.42031ZM13.7212 5.30021C14.9049 5.77057 16.7178 6.52773 18.6468 7.36219C28.1502 11.626 32.3146 16.7426 40.2163 34.1176C43.9536 42.3254 47.4773 46.4827 52.8163 48.9343C53.0361 49.0376 53.2403 49.1409 53.428 49.2434C52.9543 49.8349 52.4586 50.4081 51.9422 50.9618C49.257 50.0775 45.5358 47.5583 43.5264 44.8837C42.0315 43.0716 38.5078 36.4627 35.518 30.3868C29.4315 17.8085 25.9078 13.6513 17.579 8.96112C15.227 7.61948 13.6303 6.64399 12.7208 5.97658C13.0494 5.74462 13.383 5.5191 13.7212 5.30021ZM41.791 58.0979C41.3416 57.5168 40.7132 56.7841 39.8959 55.8631C38.1874 54.0509 35.518 49.2541 33.9163 45.0969C28.8976 32.4121 21.6366 23.9911 12.6671 20.3668C8.73688 18.7618 4.05944 17.8281 2.63514 18.1896C2.53996 18.4008 2.44714 18.6133 2.35674 18.8271C2.82208 19.3113 4.28991 20.0539 6.0468 20.58C11.5993 22.2855 20.3552 27.9351 23.9857 32.0923C25.5874 34.1176 28.5773 39.3408 30.4993 43.7112C33.7142 51.0927 36.9292 56.7229 39.2334 59.0562C40.104 58.7748 40.9572 58.4547 41.791 58.0979ZM30.8869 60.4913C30.2379 57.4563 27.572 50.0455 25.801 46.6959C23.1315 41.3661 14.4824 33.478 8.07561 30.4934C4.55372 28.882 1.58642 28.1262 0.074445 28.3643C0.0293933 29.0036 0.00437019 29.6484 0 30.2981C0.187543 30.3546 0.391048 30.3868 0.601002 30.3868C3.80439 30.3868 13.5214 36.2495 18.1129 41.0463C22.5976 45.6299 26.6553 53.0916 28.257 59.4873C28.3442 59.8355 28.4591 60.166 28.5926 60.4717C29.0588 60.4933 29.5278 60.5041 29.9993 60.5041C30.2962 60.5041 30.5921 60.4998 30.8869 60.4913ZM21.5883 59.3091C21.7005 58.7279 21.7306 57.9017 21.6366 56.8224C21.3163 52.3454 18.3264 47.6552 14.3756 45.2035C11.475 43.4486 5.10122 42.6327 2.93784 43.4692C3.25974 44.1399 3.60584 44.7967 3.975 45.4386C4.82111 45.5504 5.97449 45.7434 6.47391 45.8431C7.11458 45.9497 8.50272 46.1629 9.6773 46.2695C13.4146 46.4827 18.4332 51.919 19.1807 56.6092C19.3088 57.4315 19.4777 58.1222 19.6675 58.6776C20.2981 58.9089 20.9387 59.1197 21.5883 59.3091Z" fill="white"/>
                </svg>
        //- v-spacer
        v-btn(
            v-for="link in links"
            :to='link.to' nuxt
            variant='text'
            :active='isActive(link)'
        ) {{link.title}}
        //- sign in
        v-btn(v-if="!loggedIn" nuxt to="/login" color='blue') {{$vuetify.locale.t(`$vuetify.login`)}}
        v-btn(v-else @click='authStore.logout' color='red') {{$vuetify.locale.t(`$vuetify.logout`)}}
    v-main
        v-container
            //- v-breadcrumbs(:items="breadcrumbs")
                template(v-slot:divider)
                    v-icon mdi-chevron-{{$vuetify.rtl ? 'left' : 'right'}}
            v-overlay.datePickerOverlay(v-model="overlay" persistent :scrim='false')
            slot
</template>

<script>
import { useAuthStore } from "~/store/auth";
import { useDatesStore } from "~/store/forms/dates";
import { storeToRefs } from "pinia";
export default {
    async setup() {
        const authStore = useAuthStore();
        const datesStore = useDatesStore();
        return {
            authStore,
            ...storeToRefs(authStore),
            ...storeToRefs(datesStore),
        };
    },
    data: () => ({}),
    computed: {
        links() {
            return [
                {
                    icon: "mdi-home",
                    title: this.$vuetify.locale.t("$vuetify.home"),
                    to: "/",
                },
                {
                    title: this.$vuetify.locale.t("$vuetify.competitions"),
                    to: "/soon",
                },
                {
                    title: this.$vuetify.locale.t("$vuetify.exams"),
                    to: "/soon",
                },
                {
                    title: this.$vuetify.locale.t("$vuetify.analysis"),
                    to: "/soon",
                },
            ];
        },
    },
    methods: {
        isActive(link) {
            return link.to === "/admin/groups";
        },
    },
};
</script>

<style lang="sass">
@import "@/assets/variables"
@import "@/assets/general"
svg
    transform: scale(0.7)
</style>
